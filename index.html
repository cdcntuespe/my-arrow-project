<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>隨機箭頭播放</title>
    <style>
        img {
            width: 500px; /* 設置箭頭的寬度 */
            height: 500px; /* 設置箭頭的高度 */
            display: block;
            margin: 0 auto; /* 使箭頭居中 */
        }
    </style>
</head>
<body>

<img id="arrow" alt="arrow"> <!-- 不設置 src 讓初始顯示為空 -->

<!-- 控制播放速度的按鈕 -->
<div style="text-align: center; margin-top: 20px;">
		<label for="speed-range">播放速度 (毫秒):</label>
    <input type="number" id="speed-range" value="1000" min="100" step="100">
</div>

<!-- 添加提示用戶的文字 -->
<div style="text-align: center; margin-top: 20px; color: red;">
 	<p>預設：四色上下左右、1000毫秒（1秒）切換一張圖片</p>
	<p>調整：按「暫停」按鈕→切換顏色方向、速度→按「播放」按鈕</p>
</div>
	
<!-- 播放和暫停按鈕 -->
<div style="text-align: center; margin-top: 20px;">
    <button id="play-button">播放</button>
    <button id="pause-button">暫停</button>
</div>

<!-- 切換圖片範圍的按鈕 -->
<div style="text-align: center; margin-top: 20px;">
    <button id="set-range-1">三色左右</button>
    <button id="set-range-2">四色左右</button>
		<button id="set-range-3">三色上下左右</button>
    <button id="set-range-all">四色上下左右</button>
</div>

<script>
    // 定義不同範圍的箭頭圖片
    const arrowImagesAll = [
        'arrow_right_red.png', 
        'arrow_right_blue.png', 
        'arrow_right_yellow.png',
				'arrow_right_green.png',
        'arrow_left_red.png',
        'arrow_left_blue.png',
        'arrow_left_yellow.png',
				'arrow_left_green.png',
				'arrow_up_red.png', 
        'arrow_up_blue.png', 
        'arrow_up_yellow.png',
				'arrow_up_green.png',
        'arrow_down_red.png',
        'arrow_down_blue.png',
        'arrow_down_yellow.png',
				'arrow_down_green.png'
    ];

    const arrowImagesRange1 = [
				'arrow_right_red.png', 
        'arrow_right_blue.png', 
        'arrow_right_yellow.png',
				'arrow_left_red.png',
        'arrow_left_blue.png',
        'arrow_left_yellow.png'
    ];

    const arrowImagesRange2 = [
        'arrow_right_red.png', 
        'arrow_right_blue.png', 
        'arrow_right_yellow.png',
				'arrow_right_green.png',
        'arrow_left_red.png',
        'arrow_left_blue.png',
        'arrow_left_yellow.png',
				'arrow_left_green.png'
    ];

	const arrowImagesRange3 = [
        'arrow_right_red.png', 
        'arrow_right_blue.png', 
        'arrow_right_yellow.png',
        'arrow_left_red.png',
        'arrow_left_blue.png',
        'arrow_left_yellow.png',
				'arrow_up_red.png', 
        'arrow_up_blue.png', 
        'arrow_up_yellow.png',
        'arrow_down_red.png',
        'arrow_down_blue.png',
        'arrow_down_yellow.png',
	    ];

    // 默認範圍為全部圖片
    let arrowImages = arrowImagesAll;

    let currentIndex = -1; // 初始化為 -1，以確保第一次選擇圖片時總是不同
    let slideshowInterval;
    let isPlaying = false;
    let speed = 1000; // 初始播放速度為 1000 毫秒

    // 隨機切換圖片的函數，保證不連續顯示相同圖片
    function changeArrowImage() {
        let nextIndex;
        do {
            nextIndex = Math.floor(Math.random() * arrowImages.length);
        } while (nextIndex === currentIndex); // 保證不選擇上一張圖片
        currentIndex = nextIndex;
        document.getElementById("arrow").src = arrowImages[currentIndex];
    }

    // 播放箭頭圖片 (使用 setTimeout 控制)
    function playSlideshow() {
        if (!isPlaying) {
            isPlaying = true; // 更新播放狀態
            function showNextImage() {
                changeArrowImage();
                slideshowTimeout = setTimeout(showNextImage, speed); // 根據當前速度繼續下一張圖片
            }
            showNextImage();
        }
    }

   // 暫停箭頭圖片
    function pauseSlideshow() {
        clearTimeout(slideshowTimeout);
        isPlaying = false; // 更新播放狀態
    }

    // 調整播放速度
    function adjustSpeed() {
        speed = document.getElementById("speed-range").value;
        if (isPlaying) {
            clearTimeout(slideshowTimeout); // 暫停現有的計時器
            playSlideshow(); // 重新以新速度播放
        }
    }

    // 切換至範圍 1 的圖片
    document.getElementById("set-range-1").addEventListener("click", function() {
        arrowImages = arrowImagesRange1;
        currentIndex = -1; // 重置圖片索引，避免範圍切換後顯示錯誤
        if (isPlaying) {
            clearTimeout(slideshowTimeout);
            playSlideshow();
        }
    });

    // 切換至範圍 2 的圖片
    document.getElementById("set-range-2").addEventListener("click", function() {
        arrowImages = arrowImagesRange2;
        currentIndex = -1; // 重置圖片索引，避免範圍切換後顯示錯誤
        if (isPlaying) {
            clearTimeout(slideshowTimeout);
            playSlideshow();
        }
    });

	// 切換至範圍 3 的圖片
    document.getElementById("set-range-3").addEventListener("click", function() {
        arrowImages = arrowImagesRange3;
        currentIndex = -1; // 重置圖片索引，避免範圍切換後顯示錯誤
        if (isPlaying) {
            clearTimeout(slideshowTimeout);
            playSlideshow();
        }
    });

    // 切換至全部圖片
    document.getElementById("set-range-all").addEventListener("click", function() {
        arrowImages = arrowImagesAll;
        currentIndex = -1; // 重置圖片索引，避免範圍切換後顯示錯誤
        if (isPlaying) {
            clearTimeout(slideshowTimeout);
            playSlideshow();
        }
    });

    // 綁定播放按鈕
    document.getElementById("play-button").addEventListener("click", playSlideshow);

    // 綁定暫停按鈕
    document.getElementById("pause-button").addEventListener("click", pauseSlideshow);

    // 綁定速度調整輸入框
    document.getElementById("speed-range").addEventListener("input", adjustSpeed);

    // 預設自動開始播放
    playSlideshow();
</script>

</body>
</html>
